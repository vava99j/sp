<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title >Sistema de pessoa</title>
    <style>
        #agenda {
            display: none;
        }
    </style>
</head>
<header>
  <div class="titulo">
  <h1>Sistema de Cadastro e Agenda</h1>
  </div> 
</header>


<body>  
    
<main>

  <div class="cadastrar" id="login"> 
  <h2>Cadastro de Pessoa</h2>

  <label for="cpf">CPF:</label>
  <input type="text" id="cpf">

  <label for="nome">Nome:</label>
  <input type="text" id="nome">

  <label for="contato">Contato:</label>
  <input type="text" id="contato">

  <label for="senha">Senha:</label>
  <input type="text" id="senha">
 
  <button onclick="inserirPessoa()">Inserir</button>
  <button onclick="consultarPessoa()">Consultar</button>
  <button onclick="atualizarPessoa()">Atualizar</button>
  <button onclick="apagarPessoa()">Apagar</button>
  <button onclick="mostrarAgenda()">Ir para Agenda</button>
  
  
  <p id="resposta_castastro"></p>
  </div> 
   
  <div class="cadastrar" id="agenda">
      <h2>Agenda</h2>

      <label for="cpfAgenda">CPF:</label>
      <input type="text" id="cpfAgenda">

      <label for="dataAgenda">Data:</label>
      <input type="date" id="dataAgenda">

      <label for="descricaoAgenda">Descrição:</label>
      <input type="text" id="descricaoAgenda">

      <button onclick="inserirAgenda()">Inserir</button>
      <button onclick="consultarAgenda()">Consultar</button>
      <button onclick="atualizarAgenda()">Atualizar</button>
      <button onclick="apagarAgenda()">Apagar</button>
      <button onclick="voltarCadastro()">Voltar ao Cadastro</button>

      <p id="resposta_agenda"></p>
    </div>

    <script>


        function inserirPessoa(){
            var cpf = document.getElementById("cpf").value;
            var nome = document.getElementById("nome").value;
            var contato = document.getElementById("contato").value;
            var senha = document.getElementById("senha").value;
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET", "controllerpessoa.php?cpf="+cpf+"&nome="+nome+"&contato="+contato+"&senha="+senha+"&acao=inserir");
            requisicao.send();

            requisicao.onload = function(){
             document.getElementById("resposta_castastro").innerHTML= this.responseText;
            }
        }

        function consultarPessoa(){
            var requisicao = new XMLHttpRequest();
            requisicao.open("POST", "controllerPessoa.php?acao=consultar");
            requisicao.send();

            requisicao.onload = function(){
                var organizacao=JSON.parse(this.responseText);
                var resultado = "";
                for(var i=0; i<organizacao.length; i++){
                    resultado = resultado+ "CPF: "+organizacao[i].cpf+
                    "<br>Nome: "+organizacao[i].nome+
                    "<br>Contato: "+organizacao[i].contato+
                    "<br>Senha: "+organizacao[i].senha+"<br><br>";
                }
                document.getElementById("resposta_castastro").innerHTML = resultado;
            }
            }

        function apagarPessoa(){
            var cpf = document.getElementById("cpf").value;
            var nome = document.getElementById("nome").value;
            var contato = document.getElementById("contato").value;
            var senha = document.getElementById("senha").value;
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET", "controllerpessoa.php?cpf="+cpf+"&acao=apagar");
            requisicao.send();

            requisicao.onload = function(){
             document.getElementById("resposta_castastro").innerHTML= this.responseText;
            }
    }

        function atualizarPessoa(){
            var cpf = document.getElementById("cpf").value;
            var nome = document.getElementById("nome").value;
            var contato = document.getElementById("contato").value;
            var senha = document.getElementById("senha").value;
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET", "controllerpessoa.php?cpf="+cpf+"&nome="+nome+"&contato="+contato+"&senha="+senha+"&acao=atualizar");
            requisicao.send();

            requisicao.onload = function(){
             document.getElementById("resposta_castastro").innerHTML= this.responseText;
            }
    }

    
   function inserirAgenda() {
      var cpf = document.getElementById("cpfAgenda").value;
      var data = document.getElementById("dataAgenda").value;
      var descricao = document.getElementById("descricaoAgenda").value;

      var requisicao = new XMLHttpRequest();
      requisicao.open("GET", "controllerAgenda.php?cpf="+cpf+"&data="+data+"&descricao="+ descricao+"&acao=inserir");
      requisicao.send();

      requisicao.onload = function () {
        document.getElementById("resposta_agenda").innerHTML = this.responseText;
      };
    }

    function consultarAgenda() {
      var cpf = document.getElementById("cpfAgenda").value;
      var requisicao = new XMLHttpRequest();
      requisicao.open("GET", "controllerAgenda.php?cpf="+cpf+"&acao=consultar");
      requisicao.send();

      requisicao.onload = function () {
        var organizacao = JSON.parse(this.responseText);
        var resultado = "";
        for (var i = 0; i < organizacao.length; i++) {
          resultado +=
            "CPF: " + organizacao[i].cpf +
            "<br>Data: " + organizacao[i].data +
            "<br>Descrição: " + organizacao[i].descricao + "<br><br>";
        }
        document.getElementById("resposta_agenda").innerHTML = resultado;
      };
    }

    function atualizarAgenda() {
      var cpf = document.getElementById("cpfAgenda").value;
      var data = document.getElementById("dataAgenda").value;
      var descricao = document.getElementById("descricaoAgenda").value;

      var requisicao = new XMLHttpRequest();
      requisicao.open("GET", "controllerAgenda.php?cpf="+cpf+"&data="+data+"&descricao="+descricao+"&acao=atualizar");
      requisicao.send();

      requisicao.onload = function () {
        document.getElementById("resposta_agenda").innerHTML = this.responseText;
      };
    }

    function apagarAgenda() {
      var cpf = document.getElementById("cpfAgenda").value;

      var requisicao = new XMLHttpRequest();
      requisicao.open("GET", "controllerAgenda.php?cpf="+cpf+"&acao=apagar");
      requisicao.send();

      requisicao.onload = function () {
        document.getElementById("resposta_agenda").innerHTML = this.responseText;
      };
    }


         function mostrarAgenda() {
         document.getElementById("login").style.display = "none";
         document.getElementById("agenda").style.display = "block"; 
        }

         function voltarCadastro() {
        document.getElementById("login").style.display = "block";
        document.getElementById("agenda").style.display = "none";
        }


    </script>
    
</body>
</html>